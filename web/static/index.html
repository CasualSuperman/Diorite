<!DOCTYPE html>
<html lang="en-US">
<head>

	<meta charset="utf-8">
	<title>Diorite</title>
	<link rel="stylesheet/less" type="text/css" href="main.less">
	<script src="less.js"></script>
	<script src="cssClass.js"></script>
	<script src="prefixfree.min.js"></script>
	<script src="gs/gs.js"></script>
	<script>
	var gs = new GoSocket("localhost:6060/gs/");
	</script>

</head>
<body>

<header>
	<h1>Diorite</h1>
	<div id="search">
		<span>Search</span>
		<div>
			<input id="cardSearch" name="cardSearch" />
			<div id="cardSearchAutocomplete"></div>
		</div>
	</div>
</header>
<section id="main">
	<p>Welcome to Diorite!</p>
</section>
<script>
gs.On("nameSearch", function(cards) {
	var div = document.getElementById("cardSearchAutocomplete");
	while (div.childNodes.length > 0) {
		div.removeChild(div.firstChild);
	}
	for (var i = 0; i < cards.length; i++) {
		var completion = document.createElement("div");
		completion.innerHTML = cards[i].Name;
		completion.dataset.multiverseId = cards[i].MultiverseID;
		div.appendChild(completion);
	}
});

var searchBar = document.getElementById("cardSearch");

searchBar.addEventListener("keyup", function() {
	gs.Send("nameSearch", this.value);
});
searchBar.addEventListener("focus", function() {
	document.getElementById("search").addClass("focused");
});
searchBar.addEventListener("blur", function() {
	document.getElementById("search").removeClass("focused");
});
</script>

</body>
</html>
